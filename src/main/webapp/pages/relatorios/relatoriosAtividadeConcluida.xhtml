<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets" 
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:composition template="/pages/templates/default.xhtml"> 
        <ui:define name="corpo"> 
            <h:form id="consAtividades">   
                <p:growl id="growl" showDetail="true" sticky="true" />
                <h:panelGrid columns="2" style="width: 100%;margin-top: -1.5%;">
                    <h:panelGroup> 
                        <p:commandLink id="btnHome" action="#{usuarioLogadoMB.paginainicial()}" style="margin-left:0.5%;" class="hoverTextos">
                            <i class="fa fa-home"/>
                            <p:outputLabel value="Home" style="margin-left:0.5%;font-weight: inherit;"/>
                        </p:commandLink>
                        <p:outputLabel value="/" style="margin-left:0.5%;color:#797979;font-weight: inherit;"/>
                        <p:outputLabel value="Do It!" style="margin-left:0.5%;color:#797979;font-weight: inherit;"/>
                    </h:panelGroup>     
                </h:panelGrid>   
                <br/> 
                <p:outputLabel value="Do It!" style="margin-left:0.5%;color:#797979;font-weight: inherit;font-size: 22px;"/>
                <div class="row state-overview">
                    <h:panelGroup id="colunaNumTarefas">
                        <div class="col-lg-3 col-sm-6">     
                            <section class="panel" style="background: #C9A471;">
                                <p:commandLink action="#">
                                    <div class="symbol terques" style="background: #C9A471;">
                                        <i class="fa fa-clock-o" style=""></i> 
                                    </div>
                                    <div class="value" style="padding-right: 8px;">       
                                        <h1><p:outputLabel value="#{dashboardMB.retornarAtividadesAtrasadas()}"/></h1>    
                                        <br/><br/><br/> <br/>        
                                        <p>TAREFAS</p><br/> 
                                        <p>EM ATRASO</p>    
                                    </div> 
                                </p:commandLink>      
                            </section>  
                        </div>
                        <div class="col-lg-3 col-sm-6">
                            <section class="panel" style="background: #006D4D;margin-left:8%;">
                                <p:commandLink action="#{menuMB.atividades()}">
                                    <div class="symbol terques" style="background: #006D4D;">
                                        <i class="fa fa-calendar" style=""></i> 
                                    </div>  
                                    <div class="value" style="padding-right: 8px;">       
                                        <h1><p:outputLabel value="#{dashboardMB.retornarAtividadesHoje()}"/></h1>    
                                        <br/><br/><br/>     
                                        <p>TAREFAS</p> <br/>      
                                        <p>PARA HOJE</p>  
                                    </div> 
                                </p:commandLink>
                            </section>
                        </div>   
                        <div class="col-lg-3 col-sm-6">
                            <section class="panel" style="background: #005552;float: right;">
                                <div class="symbol terques" style="background: #005552;">
                                    <i class="fa fa-check-circle-o" style=""></i> 
                                </div>
                                <div class="value" style="padding-right: 8px;">       
                                    <h1><p:outputLabel value="#{dashboardMB.retornarAtividadesSemana()}"/></h1>    
                                    <br/><br/><br/>   <br/>      
                                    <p>CONCLUÍDAS</p><br/> 
                                    <p>NA SEMANA</p>     
                                </div> 
                            </section>  
                        </div> 
                    </h:panelGroup>
                    <div  class="col-lg-3 col-sm-6">         
                        <p:poll interval="20" update="colunaHorario"/>
                        <h:panelGroup id="colunaHorario">
                            <section class="panel" style="background: #E3DFC2;width: 100%;">
                                <div  class="symbol" style="background: #E3DFC2;width: 100%;padding:1px;">     
                                    <h1 style="font-size:50px;color:#2E3828;margin-top: 2px;">#{dashboardMB.retornarHora()}</h1>                   
                                    <p style="font-size:14px;color:#2E3828;">
                                        <p:outputLabel value="#{dashboardMB.retornarDataPorExtenso()}"/>
                                    </p>           
                                </div>       
                                <div class="symbol" style="background:#D5D0B3;width: 100%;padding:1px;"> 
                                    <div style="width:99%;padding:5px;text-align: right;"> 
                                        <p:commandLink id="btnNovaTarefa" action="#{menuMB.adicionarAtividades()}" title="Adicionar Tarefa" style="padding:5px;">
                                            <i class="fa fa-plus" style="font-size:21px;color:#313D30;"/>   
                                            <p:ajax event="dialogReturn" listener="#{dashboardMB.gerarListas()}" update="@all"/>
                                        </p:commandLink>     
                                        <p:commandLink id="btnMenuRigth" title="Menu" class="dropdown-toggle">
                                            <i class="fa fa-reorder" style="font-size:21px;color:#313D30;"/>   
                                            <b class="caret"></b>    
                                        </p:commandLink>   
                                        <p:overlayPanel id="painelMenuRigth" for="btnMenuRigth"
                                                        hideEffect="fade" style="background:#fff;width:200px;text-align:left !important;" >
                                            <p:commandLink action="#{menuMB.atividades()}">
                                                <i class="fa fa-calendar"  style="color: #8E9398;font-size: 14px;"/>
                                                <p:outputLabel value="Tarefas" style="margin-left: 1%;"/>
                                            </p:commandLink><br/><br/>
                                            <p:commandLink action="#{dashboardMB.visualizarNotificacoes()}">
                                                <i class="fa fa-bell" style="color:#8E9398;font-size: 14px;"/>
                                                <p:outputLabel value="Notificações" style="margin-left: 1%;"/>
                                                <p:ajax event="dialogReturn" listener="#{dashboardMB.gerarListaNotificacoes()}" update=":telaInicial:btnVisualizarNotificacoes"/>
                                            </p:commandLink> <br/><br/>
                                            <h:panelGroup rendered="#{menuMB.acessoMenuCliente()}">
                                                <p:commandLink action="#{menuMB.cliente()}">  
                                                    <i class="fa fa-user" style="color: #8E9398;font-size: 14px;"/>
                                                    <p:outputLabel value="Cadastro de Clientes" style="margin-left: 1%;"/>
                                                </p:commandLink>
                                            </h:panelGroup>
                                        </p:overlayPanel>  
                                    </div>
                                </div>      
                            </section> 
                        </h:panelGroup>
                    </div>
                </div>
                <h:panelGroup id="tabelaAtividades">  
                    <div class="row" >  
                        <div class="col-md-12"> 
                            <section class="panel tasks-widget" style="width:100%;">
                                <div class="panel-body">     
                                    <div  class="task-content">
                                        <ul id="sortable" class="task-list ui-sortable">   
                                            <p:dataTable value="#{atividadesMB.listaAtividade}" var="atividades"  draggableRows="true" emptyMessage="Nenhuma Tarefa encontrada."> 
                                                <p:ajax event="rowReorder" update=":consAtividades:tabelaAtividades" /> 
                                                <p:column>
                                                    <li class="list ui-sortable-handle" style="color:#{atividadesMB.retornarCorAtividades(atividades)}">    
                                                        <i class="fa fa-ellipsis-v" style="font-size: 14px;float: left;margin-top:0.3%;"></i>
                                                        <p:commandLink id="btnPlay" action="#{atividadesMB.mudarSituacaoAtividade(atividades, 'Pause')}" update=":consAtividades:tabelaAtividades" style="float: left;margin-top: -0.2%;margin-left:1%;" rendered="#{atividadesMB.mostrarBotaoPlay(atividades.situacao)}">
                                                            <i class="fa fa-play" style="font-size: 14px;color:#B0B5B9;"></i>
                                                        </p:commandLink>   
                                                        <p:commandLink id="btnPause" action="#{atividadesMB.mudarSituacaoAtividade(atividades, 'Play')}" update=":consAtividades:tabelaAtividades" style="float: left;margin-top: -0.2%;margin-left:1%;" rendered="#{atividadesMB.mostrarBotaoPause(atividades.situacao)}">
                                                            <i class="fa fa-pause" style="font-size: 14px;color:#B0B5B9;"></i>     
                                                        </p:commandLink>   
                                                        <div class="task-checkbox" style="margin-left:1%;">  
                                                            <p:commandLink  oncomplete="PF('errosprocesso').show()" update=":formErroProcesso:dialog_processo" actionListener="#{atividadesMB.selecionarAtividade(atividades)}"> 
                                                                <p:selectBooleanCheckbox id="cbxConcluido" class="list-child" value="#{atividades.concluido}"  style="float: left;margin-top:0.6%;margin-left:1.5%;"/> 
                                                            </p:commandLink>      
                                                            
                                                            <p:commandLink rendered="#{atividadesMB.retornarSituacaoAtrasado(atividades)}" action="#{atividadesMB.mudarCoresBotoes('hoje')}" actionListener="#{atividadesMB.mudarSituacaoAtividade(atividades, 'Concluida')}" update=":consAtividades:growl"> 
                                                                <p:selectBooleanCheckbox id="cbxConcluidoAtrasado" class="list-child" value="#{atividades.concluido}"  style="float: left;margin-top:0.6%;margin-left:1.5%;"/> 
                                                                <p:ajax event="dialogReturn" listener="#{atividadesMB.mudarCoresBotoes('hoje')}" update=":consAtividades:tabelaAtividades, :consAtividades:painelBtn, :consAtividades:growl"/>   
                                                            </p:commandLink>  
                                                        </div>                 
                                                        <div class="task-title"> 
                                                            <span id="nome" class="task-title-sp">#{atividades.atividade.descricao}</span> |     
                                                            <span id="cliente" class="task-title-sp">#{atividades.atividade.cliente.apelido}</span> 
                                                            <h:panelGroup rendered="#{atividadesMB.mostrarComentarios(atividades)}">
                                                                <span id="comentarios" class="task-title-sp" style="font-weight: bold;" >
                                                                    (   
                                                                    <p:commandLink id="btnComentarios" title="Comentários" value="#{atividadesMB.retornarNumComentarios(atividades)}" action="#{atividadesMB.visualizarComentarios(atividades)}">
                                                                        <p:ajax event="dialogReturn" listener="#{atividadesMB.mudarCoresBotoes('hoje')}" update="@form"/>
                                                                    </p:commandLink>
                                                                    )      
                                                                </span>
                                                            </h:panelGroup>
                                                            <span id="data" class="task-title-sp" style="font-style: oblique;font-size: 13px;font-weight:400;">
                                                                <p:outputLabel value="#{atividades.atividade.dataMostrar}">

                                                                </p:outputLabel>
                                                            </span>
                                                            <span id="horario" class="task-title-sp" style="font-style: oblique;font-size: 13px;font-weight:400;">#{atividades.atividade.horaMostrar}</span>
                                                            <h:panelGroup id="importante" rendered="#{atividadesMB.mostrarTrianguloImportante(atividades.atividade.prioridade)}">
                                                                <span class="task-title-sp" title="Importante">
                                                                    <i class="fa fa-exclamation-triangle" style="font-size: 14px;color:#FFD700;cursor: default;"></i> 
                                                                </span>
                                                            </h:panelGroup>        
                                                            <h:panelGroup id="urgente" rendered="#{atividadesMB.mostrarTrianguloUrgente(atividades.atividade.prioridade)}">
                                                                <span class="task-title-sp" title="Urgente">
                                                                    <i class="fa fa-exclamation-triangle" style="font-size: 14px;color:#FF0000;cursor: default;"></i> 
                                                                </span>
                                                            </h:panelGroup>  
                                                            <span id="iddataretorno" class="task-title-sp">#{atividades.dataRetorno}</span>
                                                            <div class="pull-right hidden-phone">
                                                                <p:commandLink id="btnAlterarData" title="Alterar Data" actionListener="#{atividadesMB.selecionarAtividade(atividades)}" oncomplete="PF('alterarData').show()" update=":formDialogData:dialog_alterarData"> 
                                                                    <i class="fa fa-calendar" style="font-size:17px;color:#FFD700;"></i>   
                                                                </p:commandLink>
                                                                <p:commandLink id="btnEditar" title="Editar Tarefa" action="#{atividadesMB.editarAtividades(atividades)}"> 
                                                                    <i class="fa fa-edit" style="font-size:17px;color:#FF6C60;"></i> 
                                                                    <p:ajax event="dialogReturn" listener="#{atividadesMB.mudarCoresBotoes('hoje')}" update="@form"/>
                                                                </p:commandLink>   
                                                                <a id="btnMenu" data-toggle="dropdown" class="dropdown-toggle">
                                                                    <i class="fa fa-bars" style="font-size:17px;color:#1C86EE;"></i> 
                                                                    <b class="caret"></b>
                                                                </a>
                                                                <ul class="dropdown-menu extended">
                                                                    <div class="log-arrow-up"></div>
                                                                    <li><p:commandLink actionListener="#{atividadesMB.selecionarAtividade(atividades)}"  oncomplete="PF('encaminharTarefa').show()" update=":formDialogEncaminhar:dialog_encaminhar"><i class=" fa  fa-share-square-o" style="color: #8E9398;font-size: 13px;">
                                                                                <p:outputLabel value="Encaminhar" style="margin-left: 8%;"/>  
                                                                            </i></p:commandLink></li> 
                                                                    <li><p:commandLink action="#{atividadesMB.excluir(atividades)}" update="@form"><i class="fa fa-trash-o" style="color:#8E9398;font-size: 13px;">
                                                                                <p:outputLabel value="Excluir" style="margin-left: 8%;"/>
                                                                            </i></p:commandLink></li> 
                                                                    <li><p:commandLink action="#{atividadesMB.visualizarComentarios(atividades)}"><i class="fa fa-comments" style="color: #8E9398;font-size: 13px;">
                                                                                <p:outputLabel value="Comentários" style="margin-left: 8%;"/>  
                                                                                <p:ajax event="dialogReturn" listener="#{atividadesMB.mudarCoresBotoes('hoje')}" update="@form"/>
                                                                            </i></p:commandLink></li>    
                                                                    <li><p:commandLink action="#{atividadesMB.duplicarAtividade(atividades)}" update="@form"><i class="fa fa-copy" style="color: #8E9398;font-size: 13px;">  
                                                                                <p:outputLabel value="Duplicar" style="margin-left: 8%;"/>
                                                                            </i></p:commandLink></li> 
                                                                    <li><p:commandLink action="#{atividadesMB.adicionarAtividadeAguardando(atividades)}"><i class="fa fa-clock-o" style="color: #8E9398;font-size: 13px;">  
                                                                                <p:outputLabel value="Aguardando" style="margin-left: 8%;"/>
                                                                                <p:ajax event="dialogReturn" listener="#{atividadesMB.mudarCoresBotoes('hoje')}" update="@form"/>
                                                                            </i></p:commandLink></li> 
                                                                </ul>
                                                            </div>
                                                        </div>
                                                    </li>  
                                                </p:column>
                                            </p:dataTable> 
                                        </ul>  
                                    </div> 
                                </div> 
                            </section>   
                        </div>   
                    </div>     
                </h:panelGroup> 
            </h:form>  
        </ui:define>
    </ui:composition>
</html>