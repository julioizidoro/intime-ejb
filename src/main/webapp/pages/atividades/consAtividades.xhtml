<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets" 
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    <ui:composition template="/pages/templates/default.xhtml">
        <ui:define name="corpo">
            <h:form id="consAtividades">   
                <p:growl id="growl" showDetail="true" sticky="true" />
                <h:panelGrid columns="2" style="width: 100%;margin-top: -1.5%;">
                    <h:panelGroup> 
                        <p:commandLink id="btnHome" action="#{usuarioLogadoMB.paginainicial()}" style="margin-left:0.5%;" class="hoverTextos">
                            <i class="fa fa-home"/>
                            <p:outputLabel value="Home" style="margin-left:0.5%;font-weight: inherit;"/>
                        </p:commandLink>
                        <p:outputLabel value="/" style="margin-left:0.5%;color:#797979;font-weight: inherit;"/>
                        <p:outputLabel value="Do It!" style="margin-left:0.5%;color:#797979;font-weight: inherit;"/>
                    </h:panelGroup> 
                </h:panelGrid> 
                <br/> 
                <p:outputLabel value="Do It!" style="margin-left:0.5%;color:#797979;font-weight: inherit;font-size: 22px;"/>
                <h:panelGrid id="painelBtn" columns="2" style="width: 100%;" columnClasses="tamanho75,tamanho">   
                    <h:panelGroup style="text-align: left;">    
                        <p:commandLink id="btnhoje" action="#{atividadesMB.mudarCoresBotoes('hoje')}" style="margin-left:2%;" update="painelBtn,tabelaAtividades">
                            <span class="badge badge-sm label-radio" style="background:#{atividadesMB.hoje};">HOJE</span>
                        </p:commandLink>
                        <p:commandLink id="btnamanha" action="#{atividadesMB.mudarCoresBotoes('amanha')}" style="margin-left:0.5%;" update="painelBtn,tabelaAtividades"> 
                            <span class="badge badge-sm label-radio" style="background:#{atividadesMB.amanha};">AMANHÃ</span>
                        </p:commandLink>
                        <p:commandLink id="btn7dias" action="#{atividadesMB.mudarCoresBotoes('seteDias')}" style="margin-left:0.5%;" update="painelBtn,tabelaAtividades">
                            <span class="badge badge-sm label-radio" style="background:#{atividadesMB.seteDias};">7 DIAS</span>
                        </p:commandLink>
                        <p:commandLink id="btntodos" action="#{atividadesMB.mudarCoresBotoes('todos')}" style="margin-left:0.5%;" update="painelBtn,tabelaAtividades">
                            <span class="badge badge-sm label-radio" style="background:#{atividadesMB.todos};">TODOS</span>
                        </p:commandLink> 
                        <span id="visualizarConcluidas" class="badge badge-sm label-radio" style="margin-left:0.5%;height: 20px;">   
                            <p:commandButton id="btnNaoVisualizarConcluidas" rendered="#{atividadesMB.naoconcluidas}" action="#{atividadesMB.visualizarConcluidas()}" value="VISUALIZAR CONCLUÍDAS" icon="fa fa-fw fa-toggle-off" style="border: transparent;background: transparent;font-size: 14px;top: -40%;font-weight: unset;color: #2A3542;" update="painelBtn,tabelaAtividades"/>
                            <p:commandButton id="btnVisualizarConcluidas" rendered="#{atividadesMB.concluidas}" action="#{atividadesMB.visualizarConcluidas()}" value="VISUALIZAR CONCLUÍDAS" icon="fa fa-fw fa-toggle-on" style="border: transparent;background: transparent;font-size: 14px;top: -40%;font-weight: unset;color: #2A3542;" update="painelBtn,tabelaAtividades"/>  
                        </span>     
                        <span style="margin-left: 2%;">   
                            <p:inputText id="inputbuscar" class="form-control search-consultas" placeholder="Buscar" value="#{atividadesMB.buscar}">
                                <p:ajax event="blur" listener="#{atividadesMB.mudarCoresBotoes('todos')}" update="painelBtn,tabelaAtividades"/>
                            </p:inputText>
                            <h:commandButton id="btnPesquisar" style="background: transparent;border: none;" />  
                        </span>
                    </h:panelGroup>
                    <h:panelGroup style="text-align: right;">    
                        <p:commandLink id="btnadicionar" title="Adicionar" action="#{atividadesMB.adicionarAtividades()}" class="hoverTextos">
                            <i class="fa fa-plus" style="font-size:35px;"/>
                            <p:ajax event="dialogReturn"  update="@form"/>   
                        </p:commandLink>  
                    </h:panelGroup>
                </h:panelGrid>
                <div class="row" >
                    <div class="col-md-12">
                        <section class="panel tasks-widget" style="width:100%;">
                            <div class="panel-body">
                                <div class="task-content">
                                    <p:dataScroller id="tabelaAtividades" value="#{atividadesMB.listaAtividade}" var="atividades" mode="inline" scrollHeight="500">
                                        <p:outputPanel>
                                            <ul id="sortable" class="task-list">
                                                <li class="list">
                                                    <i class="fa fa-ellipsis-v" style="font-size: 14px;float: left;margin-top:0.3%;"></i>
                                                    <p:commandLink id="btnPlay" action="#{atividadesMB.modificarStatusTarefa()}" update="@form" style="float: left;margin-top: -0.2%;margin-left:1%;" rendered="#{atividadesMB.play}">
                                                        <i class="fa fa-play" style="font-size: 14px;color:#B0B5B9;"></i>
                                                    </p:commandLink>   
                                                    <p:commandLink id="btnPause" action="#{atividadesMB.modificarStatusTarefa()}" update="@form" style="float: left;margin-top: -0.2%;margin-left:1%;" rendered="#{atividadesMB.pause}">
                                                        <i class="fa fa-pause" style="font-size: 14px;color:#B0B5B9;"></i>   
                                                    </p:commandLink>   
                                                    <div class="task-checkbox" style="margin-left:1%;">
                                                        <input id="cbxConcluido" type="checkbox" class="list-child" value=""  />
                                                    </div>   
                                                    <div class="task-title">
                                                        <span id="nome" class="task-title-sp">#{atividades.atividade.descricao}</span> |  
                                                        <span id="cliente" class="task-title-sp">#{atividades.atividade.cliente.nomefantasia}</span> 
                                                        <span id="comentarios" class="task-title-sp" style="font-weight: bold;" >
                                                            (
                                                            <p:commandLink id="btnComentarios" title="Comentários" value="#" action="#{atividadesMB.visualizarComentarios()}"/>
                                                            )
                                                        </span>
                                                        <span id="data" class="task-title-sp" style="font-style: oblique;font-size: 13px;font-weight:400;">
                                                            <p:outputLabel value="#{atividades.atividade.dataexecucao}">
                                                                <f:convertDateTime pattern="dd/MM/yyyy" timeZone="America/Sao_Paulo" />
                                                            </p:outputLabel>
                                                        </span>
                                                        <span id="horario" class="task-title-sp" style="font-style: oblique;font-size: 13px;font-weight:400;">#{atividades.atividade.metatempo}</span>
                                                        <h:panelGroup id="importante" rendered="false">
                                                            <span class="task-title-sp">
                                                                <i class="fa fa-exclamation-triangle" style="font-size: 14px;color:#FF0000;cursor: default;"></i> 
                                                            </span>
                                                        </h:panelGroup>
                                                        <h:panelGroup id="urgente" rendered="true">
                                                            <span class="task-title-sp">
                                                                <i class="fa fa-exclamation-triangle" style="font-size: 14px;color:#FFD700;cursor: default;"></i> 
                                                            </span>
                                                        </h:panelGroup>


                                                        <div class="pull-right hidden-phone">
                                                            <p:commandLink id="btnAlterarData" title="Alterar Data" oncomplete="PF('alterarData').show()" > 
                                                                <i class="fa fa-calendar" style="font-size:17px;color:#FFD700;"></i> 
                                                            </p:commandLink>
                                                            <p:commandLink id="btnEditar" title="Editar Tarefa" action="#{atividadesMB.editarAtividades()}"> 
                                                                <i class="fa fa-edit" style="font-size:17px;color:#FF6C60;"></i> 
                                                            </p:commandLink> 
                                                            <a id="btnMenu" data-toggle="dropdown" class="dropdown-toggle">
                                                                <i class="fa fa-bars" style="font-size:17px;color:#1C86EE;"></i> 
                                                                <b class="caret"></b>
                                                            </a>
                                                            <ul class="dropdown-menu extended">
                                                                <div class="log-arrow-up"></div>
                                                                <li><p:commandLink ><i class=" fa  fa-share-square-o" style="color: #8E9398;font-size: 13px;">
                                                                            <p:outputLabel value="Encaminhar" style="margin-left: 8%;"/>
                                                                        </i></p:commandLink></li> 
                                                                <li><p:commandLink><i class="fa fa-trash-o" style="color:#8E9398;font-size: 13px;">
                                                                            <p:outputLabel value="Excluir" style="margin-left: 8%;"/>
                                                                        </i></p:commandLink></li> 
                                                                <li><p:commandLink action="#{atividadesMB.visualizarComentarios()}"><i class="fa fa-comments" style="color: #8E9398;font-size: 13px;">
                                                                            <p:outputLabel value="Comentários" style="margin-left: 8%;"/>
                                                                        </i></p:commandLink></li>    
                                                                <li><p:commandLink><i class="fa fa-copy" style="color: #8E9398;font-size: 13px;">  
                                                                            <p:outputLabel value="Duplicar" style="margin-left: 8%;"/>
                                                                        </i></p:commandLink></li> 
                                                            </ul>
                                                        </div>
                                                    </div>
                                                </li> 
                                            </ul>
                                        </p:outputPanel>  
                                    </p:dataScroller>
                                </div> 
                            </div>
                        </section>
                    </div>
                    <p:dialog id="dialog_alterarData"  header="ALTERAR DATA" widgetVar="alterarData" resizable="false" >
                        <div align="center">
                            <p:calendar id="dataTarefa" pattern="dd/MM/yyyy" size="18" style="margin-top: 5px;">
                                <f:convertDateTime   pattern="dd/MM/yyyy" timeZone="America/Sao_Paulo"/>
                            </p:calendar>
                            <div align="right">
                                <p:commandLink id="btnAdicionar" action="#" title="Adicionar">
                                    <i class="fa fa-check" style="color:#008B00;font-size:35px;"/>
                                </p:commandLink>
                            </div>
                        </div>
                    </p:dialog>
                </div>  
                <script src="../../resources/js/jquery.js"></script>
                <script src="../../resources/js/bootstrap.min.js"></script>   
                <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
                <script class="include" type="text/javascript" src="../../resources/js/jquery.dcjqaccordion.2.7.js"></script>
                <script src="../../resources/js/jquery.nicescroll.js" type="text/javascript"></script>
                <script src="../../resources/js/jquery.scrollTo.min.js"></script> 

                <script src="../../resources/js/slidebars.min.js"></script> 

                <script src="../../resources/js/tasks.js"></script> 

                <link href="../../resources/css/tasks.css" rel="stylesheet"/>   


                <script>
                    jQuery(document).ready(function () {
                        TaskList.initTaskWidget();
                    });

                    $(function () {
                        $("#sortable").sortable();
                        $("#sortable").disableSelection();
                    });

                </script>
            </h:form>  
        </ui:define>
    </ui:composition>
</html>   
